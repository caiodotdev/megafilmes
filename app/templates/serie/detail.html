{% extends 'base.html' %}
{% load static %}
{% load form_utils %}
{% block content %}
    <h3 class="page-header">View Serie</h3>

    <div class="row">
        <div class="col-xs-4">
            <div class="form-group">
                <label>Title:</label>

                {{ object.title }}
            </div>
        </div>
        <div class="col-xs-4">
            <div class="form-group">
                <label>Year:</label>

                {{ object.year }}
            </div>
        </div>
        <div class="col-xs-4">
            <div class="form-group">
                <label>Rating:</label>

                {{ object.rating }}
            </div>
        </div>
        <div class="col-xs-4">
            <div class="form-group">
                <label>Image:</label>

                {{ object.image }}
            </div>
        </div>
        <div class="col-xs-4">
            <div class="form-group">
                <label>Url:</label>

                {{ object.url }}
            </div>
        </div>

    </div>
    <hr/>
    <div id="actions" class="row">
        <div class="col-xs-12">
            <a class="btn btn-primary" href="{% url 'SERIE_update' serie.pk %}">
                Edit
            </a>
            <a href="{% url 'SERIE_list' %}" class="btn btn-default">Back</a>
        </div>
    </div>
    <br/>
    <form action="{% url 'SERIE_episode' %}" method="get">
        <input name="serie" id="serie" value="{{ object.id }}" class="hidden"/>
        <div class="row">
            <div class="col-xs-12">
                <button type="submit" class="btn btn-info pull-right">Assistir Playlist</button>
            </div>
        </div>
        <br/>
        <div class="row">
            {% for episodio in serie.episodio_set.all %}
                <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
                <input name="ep" value="{{ episodio.id }}" class="hidden"/>
                    <div class="panel panel-default">
                        <div class="panel-title">
                            <img class="img-responsive"
                                 src="{{ episodio.image }}"/>
                            {% if episodio.is_assistido %}
                                <span class="pull-right"> Assistido <i class="fa fa-check-circle"
                                                            style="color: greenyellow;"></i> </span>
                            {% endif %}
                        </div>
                        <div class="panel-body">
                            <p class="text-center">
                                <label>{{ episodio.number }}: {{ episodio.title|truncatechars:30 }}</label>
                            </p>
                            <p class="text-center">
                                {{ episodio.date }}
                            </p>
                            <p class="text-center">
                                <input type="checkbox" name="links" value="{{ episodio.url }}"/>
                            </p>
                        </div>
                        <div class="panel-footer text-center">
                            <a class="btn btn-primary"
                               href="{% url 'SERIE_episode' %}?serie={{ object.id }}&ep={{ episodio.id }}&link={{ episodio.url }}">
                                Assistir
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </form>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#serie_link').addClass('active');
        });
    </script>
{% endblock %}
